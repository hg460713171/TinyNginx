"use strict";(self["webpackChunkaurora_blog"]=self["webpackChunkaurora_blog"]||[]).push([[655],{2315:function(e,t,a){a.r(t),a.d(t,{default:function(){return de}});var l=a(3396),i=a(7139),r=a(9242);const c=e=>((0,l.dD)("data-v-717a94f4"),e=e(),(0,l.Cn)(),e),s={class:"flex flex-col"},n={class:"main-grid"},o={class:"post-header"},d={class:"post-labels"},p={key:1},m={key:2},u=c((()=>(0,l._)("em",{class:"opacity-50"},"#",-1))),g={key:2},h=c((()=>(0,l._)("b",{class:"opacity-50"},"#",-1))),w={key:0,class:"post-title text-white"},y={class:"flex flex-row items-center justify-start mt-8 mb-4"},f={key:0,class:"post-footer"},x={class:"text-white opacity-80"},v={class:"opacity-70"},C={key:1,class:"post-footer"},k={class:"flex flex-row items-center"},_={class:"text-ob-dim mt-1"},b={key:2,class:"post-stats"},A={class:"pl-2 opacity-70"},D={class:"pl-2 opacity-70"},W={key:3,class:"post-stats"},T={class:"pl-2"},z={class:"pl-2"},I={class:"main-grid"},M=["innerHTML"],N={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},Z=c((()=>(0,l._)("br",null,null,-1))),S=c((()=>(0,l._)("br",null,null,-1))),j=c((()=>(0,l._)("br",null,null,-1))),R={class:"flex flex-col lg:flex-row justify-start items-end my-8 my-gap"},H={key:0,class:"w-full h-full self-stretch mr-0 lg:mr-4"},E={key:1,class:"w-full h-full self-stretch mt-0"},F={id:"sticky-sidebar"},P={class:"sidebar-box mb-4"},q=c((()=>(0,l._)("div",{id:"toc1"},null,-1)));function B(e,t,a,c,B,J){const L=(0,l.up)("ob-skeleton"),Y=(0,l.up)("svg-icon"),$=(0,l.up)("SubTitle"),K=(0,l.up)("ArticleCard"),O=(0,l.up)("Comment"),Q=(0,l.up)("Profile"),U=(0,l.up)("Navigator"),G=(0,l.up)("Sticky"),V=(0,l.up)("Sidebar"),X=(0,l.Q2)("lazy");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("span",d,[e.loading?((0,l.wg)(),(0,l.j4)(L,{key:0,tag:"b",height:"20px",width:"35px"})):!e.loading&&e.article.categoryName?((0,l.wg)(),(0,l.iD)("b",p,[(0,l._)("span",null,(0,i.zw)(e.article.categoryName),1)])):((0,l.wg)(),(0,l.iD)("b",m,(0,i.zw)(e.t("settings.default-category")),1)),(0,l._)("ul",null,[e.loading?((0,l.wg)(),(0,l.j4)(L,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!e.loading&&e.article.tags&&e.article.tags.length>0?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(e.article.tags,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[u,(0,l.Uk)(" "+(0,i.zw)(e.tagName),1)])))),128)):((0,l.wg)(),(0,l.iD)("li",g,[h,(0,l.Uk)(" "+(0,i.zw)(e.t("settings.default-tag")),1)]))])]),e.article.articleTitle?((0,l.wg)(),(0,l.iD)("h1",w,(0,i.zw)(e.article.articleTitle),1)):((0,l.wg)(),(0,l.j4)(L,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),(0,l._)("div",y,[e.article.author?((0,l.wg)(),(0,l.iD)("div",f,[(0,l.wy)((0,l._)("img",{class:"hover:opacity-50 cursor-pointer",alt:"author avatar",onClick:t[0]||(t[0]=t=>e.handleAuthorClick(e.article.author.website))},null,512),[[X,e.article.author.avatar||""]]),(0,l._)("span",x,[(0,l._)("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:t[1]||(t[1]=t=>e.handleAuthorClick(e.article.author.website))},(0,i.zw)(e.article.author.nickname),1),(0,l._)("span",v,(0,i.zw)(e.t("settings.shared-on"))+" "+(0,i.zw)(e.t(`settings.months[${new Date(e.article.createTime).getMonth()}]`))+" "+(0,i.zw)(new Date(e.article.createTime).getDate())+", "+(0,i.zw)(new Date(e.article.createTime).getFullYear()),1)])])):((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("div",k,[(0,l.Wm)(L,{class:"mr-2",height:"28px",width:"28px",circle:!0}),(0,l._)("span",_,[(0,l.Wm)(L,{height:"20px",width:"150px"})])])])),""!==e.wordNum&&""!==e.readTime?((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("span",null,[(0,l.Wm)(Y,{"icon-class":"text-outline",style:{stroke:"white"}}),(0,l._)("span",A,(0,i.zw)(e.wordNum),1)]),(0,l._)("span",null,[(0,l.Wm)(Y,{"icon-class":"clock-outline",style:{stroke:"white"}}),(0,l._)("span",D,(0,i.zw)(e.readTime),1)])])):((0,l.wg)(),(0,l.iD)("div",W,[(0,l._)("span",null,[(0,l.Wm)(Y,{"icon-class":"clock"}),(0,l._)("span",T,[(0,l.Wm)(L,{width:"40px",height:"16px"})])]),(0,l._)("span",null,[(0,l.Wm)(Y,{"icon-class":"text"}),(0,l._)("span",z,[(0,l.Wm)(L,{width:"40px",height:"16px"})])])]))])])]),(0,l._)("div",I,[(0,l._)("div",null,[e.article.articleContent?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"post-html",ref:"articleRef",innerHTML:e.article.articleContent},null,8,M)):((0,l.wg)(),(0,l.iD)("div",N,[(0,l.Wm)(L,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),Z,(0,l.Wm)(L,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),S,j,(0,l.Wm)(L,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),(0,l._)("div",R,[e.preArticleCard?((0,l.wg)(),(0,l.iD)("div",H,[(0,l.Wm)($,{title:"settings.paginator.pre",icon:"arrow-left-circle"}),(0,l.Wm)(K,{class:"pre-and-next-article",data:e.preArticleCard},null,8,["data"])])):(0,l.kq)("",!0),e.nextArticleCard?((0,l.wg)(),(0,l.iD)("div",E,[(0,l.Wm)($,{title:"settings.paginator.next",side:e.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),(0,l.Wm)(K,{class:"pre-and-next-article",data:e.nextArticleCard},null,8,["data"])])):(0,l.kq)("",!0)]),(0,l.Wm)(O)]),(0,l._)("div",null,[(0,l.Wm)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(Q),(0,l.Wm)(G,{stickyTop:32,endingElId:"footer",dynamicElClass:"#sticky-sidebar"},{default:(0,l.w5)((()=>[(0,l._)("div",F,[(0,l.Wm)(r.uT,{name:"fade-slide-y",mode:"out-in"},{default:(0,l.w5)((()=>[(0,l._)("div",P,[(0,l.Wm)($,{title:"titles.toc",icon:"toc"},null,8,["title"]),q])])),_:1}),(0,l.Wm)(U)])])),_:1})])),_:1})])])])}var J=a(2506),L=a(4870),Y=a(2483),$=a(5213),K=a(3301),O=a(913),Q=a(4439),U=a(5466),G=a(7437),V=a(2069),X=a(2549),ee=a.n(X),te=(a(9525),a(3731),a(7372),a(1678),a(3275),a(8781),a(1973),a(1739),a(714),a(8072),a(9688),a(4121),a(77),a(3456),a(3774)),ae=a.n(te),le=a(3184),ie=a(6883),re=a(3286),ce=a(9085),se=(0,l.aZ)({name:"Article",components:{Sidebar:J.YE,Comment:K.s,SubTitle:O.D,ArticleCard:Q.T,Profile:J.NZ,Sticky:V.Z,Navigator:J.C3},setup(){const e=(0,l.FN)()?.appContext.config.globalProperties,t=(0,U.E)(),i=(0,G.j)(),r=(0,Y.yj)(),c=(0,Y.tv)(),{t:s}=(0,$.QT)(),n=(0,L.iH)(!0),o=(0,L.iH)();let d=a(3812)();const p=(0,L.qj)({articleId:"",article:"",wordNum:"",readTime:"",comments:[],images:[],preArticleCard:"",nextArticleCard:"",haveMore:!1,isReload:!1}),m=(0,L.qj)({current:1,size:7});i.type=1,(0,l.bv)((()=>{p.articleId=r.params.articleId,x(),h(),w()})),(0,l.Ah)((()=>{t.resetHeaderImage(),p.article="",ae().destroy()})),(0,Y.ao)((e=>{p.article="",p.readTime="",p.wordNum="",p.comments=[],p.images=[],p.preArticleCard="",p.nextArticleCard="",p.articleId=e.params.articleId,m.current=1,p.isReload=!0,x(),h(),w()})),(0,l.JJ)("comments",(0,l.Fl)((()=>p.comments))),(0,l.JJ)("haveMore",(0,l.Fl)((()=>p.haveMore))),le.Z.on("articleFetchComment",(()=>{m.current=1,p.isReload=!0,w()})),le.Z.on("articleFetchReplies",(e=>{y(e)})),le.Z.on("articleLoadMore",(()=>{w()}));const u=e=>{(0,ie.e)({images:p.images,index:p.images.indexOf(e)})},g=()=>{let e=o.value.children;if(e.length)for(let l=0;l<e.length;l++){let t=e[l],a=/^H[1-4]{1}$/;a.exec(t.tagName)&&(t.id=l)}ae().init({tocSelector:"#toc1",contentSelector:".post-html",headingSelector:"h1, h2, h3",onClick:function(e){e.preventDefault()}});const t=o.value.getElementsByTagName("img");for(var a=0;a<t.length;a++)p.images.push(t[a].src),t[a].addEventListener("click",(function(e){u(e.target.currentSrc)}))},h=()=>{n.value=!0,re.Z.getArticeById(p.articleId).then((({data:a})=>{if(52003===a.code)return e.$notify({title:"Error",message:"文章密码认证未通过",type:"error"}),void c.push({path:"/出错啦"});null!==a.data?(t.setHeaderImage(a.data.articleCover),new Promise((e=>{a.data.articleContent=(0,ce.Z)(a.data.articleContent),e(a.data)})).then((e=>{p.article=e,p.wordNum=Math.round(v(e.articleContent).length/100)/10+"k",p.readTime=Math.round(v(e.articleContent).length/400)+"mins",n.value=!1,(0,l.Y3)((()=>{ee().highlightAll(),g()}))})),new Promise((e=>{a.data.preArticleCard.articleContent=d.render(a.data.preArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(a.data.preArticleCard)})).then((e=>{p.preArticleCard=e})),new Promise((e=>{a.data.nextArticleCard.articleContent=d.render(a.data.nextArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(a.data.nextArticleCard)})).then((e=>{p.nextArticleCard=e}))):c.push({path:"/出错啦"})}))},w=()=>{const e={type:1,topicId:p.articleId,current:m.current,size:m.size};re.Z.getComments(e).then((({data:e})=>{p.isReload?(p.comments=e.data.records,p.isReload=!1):p.comments.push(...e.data.records),e.data.count<=p.comments.length?p.haveMore=!1:p.haveMore=!0,m.current++}))},y=e=>{re.Z.getRepliesByCommentId(p.comments[e].id).then((({data:t})=>{p.comments[e].replyDTOs=t.data}))},f=e=>{""===e&&(e=window.location.href),window.location.href=e},x=()=>{window.scrollTo({top:0})},v=e=>e.replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,"");return{articleRef:o,...(0,L.BK)(p),isMobile:(0,l.Fl)((()=>t.isMobile)),handleAuthorClick:f,loading:n,t:s}}}),ne=a(89);const oe=(0,ne.Z)(se,[["render",B],["__scopeId","data-v-717a94f4"]]);var de=oe}}]);